<!-- public/index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LitMap</title>
    <link rel="stylesheet" href="styles/style.css">
</head>

<body>
    <h1>LitMap - Explore Book Locations!</h1>

    <div class="main-container">
        <div class="sidebar-container">
            <div id="navbar">
                <button id="searchTab" class="nav-button active">Search</button>
                <button id="adminTab" class="nav-button">Admin</button>
            </div>

            <!-- View Toggle Buttons -->

            <div class="view-toggle">
                <button class="view-toggle-btn" id="map-btn" onclick="showMap()">Map</button>
                <button class="view-toggle-btn" id="list-btn" onclick="showList()">List</button>
            </div>

            <div id="searchControls" class="tab-content style=" display: block;">
                <!-- Book list content -->
                <h3>Books Search</h3>

                <form name="searchForm" class="stacked greyBox searchBox searchBox--large" action="/search"
                    accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="âœ“">
                    <div class="greyText" style="padding-bottom: 10px">
                        <input type="text" name="q" size="55" id="search_query_main"
                            class="searchBox__input searchBox--large__input"
                            placeholder="Title, Author, keyword or ISBN">
                        <input type="submit" value="Search" class="searchBox__button">
                    </div>

                    <div class="radio-container">
                        <label>
                            <input type="radio" checked name="search_field" value="all">
                            <span>All</span>
                        </label>
                        <label>
                            <input type="radio" name="search_field" value="title">
                            <span>Title</span>
                        </label>
                        <label>
                            <input type="radio" name="search_field" value="author">
                            <span>Author</span>
                        </label>
                        <label>
                            <input type="radio" name="search_field" value="keyword">
                            <span>Keyword</span>
                        </label>
                    </div>
                    <div class="clear"></div>
                </form>

            </div>

            <div id="adminControls" class="tab-content hidden style=" display: none;">
                <!-- Admin content -->
                <h3>Admin Panel</h3>
                <p>Admin functionalities go here.</p>
                <!-- Form to add a book with a location -->
                <div id="form-container">
                    <form id="locationForm">
                        <input type="text" id="adminlocationInput" placeholder="Enter location (e.g., New Delhi)"
                            required>
                        <input type="text" id="bookTitle" placeholder="Book title" required>
                        <input type="text" id="bookAuthor" placeholder="Author name" required>
                        <button type="submit">Add Book</button>
                    </form>
                    <div id="controls">
                        <button id="uploadBooksButton">Upload More Books</button>
                        <!-- You can add other buttons and dropdowns here -->
                    </div>


                </div>
            </div>

        </div> <!-- side panel-->

        <!-- Map container -->
        <div class="map-container" id="map-container">
            <script>
                // Load the map.html content into #map-container
                document.addEventListener('DOMContentLoaded', function () {
                    fetch('map.html')
                        .then(response => response.text())
                        .then(data => {
                            document.getElementById('map-container').innerHTML = data;
                            // // Call map initialization after loading the content
                            // initializeMap();
                            console.log('map loaded');
                        });
                });
            </script>
        </div>

        <!-- MapList Container -->
        <div class="list-map-container" id="list-map-container">
            <!-- List Container -->
            <div class="list-container" id="list-container">
                <h3>List View</h3>
                <div class="list-content">
                    <table id="bookTable" class="styled-table">
                        <!-- Table content will be populated dynamically -->
                    </table>
                </div>
            </div>
            <!-- Map Container -->
            <div class="map-container2" id="map-container2">
                <h3>Map View</h3>
            </div>

        </div>

    </div>

    <!-- prettier-ignore -->
    <script>(g => { var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window; b = b[c] || (b[c] = {}); var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => { await (a = m.createElement("script")); e.set("libraries", [...r] + ""); for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]); e.set("callback", c + ".maps." + q); a.src = `https://maps.${c}apis.com/maps/api/js?` + e; d[q] = f; a.onerror = () => h = n(Error(p + " could not load.")); a.nonce = m.querySelector("script[nonce]")?.nonce || ""; m.head.append(a) })); d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n)) })
            ({ key: "AIzaSyCgtK2Tq4ZHc0K-GHvxop5Y5S1J8dnpGBc", v: "weekly" });</script>
    <script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>

    <script src="scripts/data.js"></script>

    <script type="module" src="scripts/firebase.js"></script>
    <script type="module" src="scripts/map.js"></script>
    <script type="module" src="scripts/app.js"></script>


</body>

</html>