<!-- public/index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LitMap</title>
    <link rel="stylesheet" href="styles/style.css">
</head>

<body>
    <h1>LitMap - Explore Book Locations!</h1>

    <div class="main-container">
        <div class="side-panel">
            <div id="navbar">
                <button id="searchTab" class="nav-button active">Search</button>
                <button id="adminTab" class="nav-button">Admin</button>
            </div>

            <!-- View Toggle Buttons -->

            <div class="view-toggle">
                <button class="view-toggle-btn" id="map-btn" onclick="showMap()">Map</button>
                <button class="view-toggle-btn" id="list-btn" onclick="showList()">List</button>
            </div>

            <div id="searchControls" class="tab-content style=" display: block;">
                <!-- Book list content -->
                <h3>Books Search</h3>

                <!-- Search Bar -->
                <label for="search-bar">General Search</label>
                <input type="text" id="search-bar" placeholder="Search by keyword...">

                <!-- Author -->
                <label for="author">Author</label>
                <input type="text" id="author" placeholder="Search by author...">

                <!-- Publish Date -->
                <label for="publish-date">Publish Year</label>
                <input type="number" id="publish-date" placeholder="Enter publish year">

                <!-- Title -->
                <label for="title">Title</label>
                <input type="text" id="title" placeholder="Search by title...">

                <!-- Topic -->
                <label for="topic">Topic</label>
                <input type="text" id="topic" placeholder="Search by topic...">

                <!-- Tags -->
                <label for="tags">Tags</label>
                <input type="text" id="tags" placeholder="Search by tags (comma separated)">

                <!-- Genre -->
                <label for="genre">Genre</label>
                <select id="genre">
                    <option value="">Select genre</option>
                    <option value="Fiction">Fiction</option>
                    <option value="Non-Fiction">Non-Fiction</option>
                    <option value="Thriller">Thriller</option>
                    <option value="Romance">Romance</option>
                    <!-- Add more genres as needed -->
                </select>

                <!-- Location -->
                <label for="location">Location</label>
                <input type="text" id="location" placeholder="Search by location...">

                <!-- Advanced Search Toggle -->
                <button type="button" onclick="toggleAdvancedSearch()">Advanced Search</button>

                <!-- Advanced Search Options -->
                <div class="advanced-search">
                    <label for="language">Language</label>
                    <input type="text" id="language" placeholder="Search by language">

                    <label for="isbn">ISBN</label>
                    <input type="text" id="isbn" placeholder="Search by ISBN">
                </div>

                <!-- Search Button -->
                <button class="search-btn" onclick="searchBooks()">Search</button>

                <ul id="bookList">
                    <!-- Book items will be dynamically added here -->
                </ul>
            </div>

            <div id="adminControls" class="tab-content hidden style=" display: none;">
                <!-- Admin content -->
                <h3>Admin Panel</h3>
                <p>Admin functionalities go here.</p>
                <!-- Form to add a book with a location -->
                <div id="form-container">
                    <form id="locationForm">
                        <input type="text" id="adminlocationInput" placeholder="Enter location (e.g., New Delhi)"
                            required>
                        <input type="text" id="bookTitle" placeholder="Book title" required>
                        <input type="text" id="bookAuthor" placeholder="Author name" required>
                        <button type="submit">Add Book</button>
                    </form>
                    <div id="controls">
                        <button id="uploadBooksButton">Upload More Books</button>
                        <!-- You can add other buttons and dropdowns here -->
                    </div>


                </div>
            </div>

            <!-- Other side panel content -->
        </div> <!-- side panel-->

        <!-- Map container -->
        <div class="map-container" id="map-container">
            <script>
                // Load the map.html content into #map-container
                document.addEventListener('DOMContentLoaded', function () {
                    fetch('map.html')
                        .then(response => response.text())
                        .then(data => {
                            document.getElementById('map-container').innerHTML = data;
                            // // Call map initialization after loading the content
                            // initializeMap();
                            console.log('map loaded');
                        });
                });
            </script>
        </div>

        <!-- List Container -->
        <div class="list-container" id="list-container">
            <h3>List View</h3>
            <div class="list-content">
                <!-- Placeholder for the actual list of books -->
                List of books goes here.
            </div>
        </div>

    </div>

    <!-- prettier-ignore -->
    <script>(g => { var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window; b = b[c] || (b[c] = {}); var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => { await (a = m.createElement("script")); e.set("libraries", [...r] + ""); for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]); e.set("callback", c + ".maps." + q); a.src = `https://maps.${c}apis.com/maps/api/js?` + e; d[q] = f; a.onerror = () => h = n(Error(p + " could not load.")); a.nonce = m.querySelector("script[nonce]")?.nonce || ""; m.head.append(a) })); d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n)) })
            ({ key: "AIzaSyCgtK2Tq4ZHc0K-GHvxop5Y5S1J8dnpGBc", v: "weekly" });</script>
    <script src="https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js"></script>

    <script src="scripts/data.js"></script>

    <script type="module" src="scripts/firebase.js"></script>
    <!-- <script src="scripts/app.js"></script> -->
    <script type="module" src="scripts/map.js"></script>
    <script src="scripts/app.js"></script>


</body>

</html>